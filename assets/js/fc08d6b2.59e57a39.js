"use strict";(self.webpackChunkr_14_documentation=self.webpackChunkr_14_documentation||[]).push([[995],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>m});var o=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,o,n=function(e,t){if(null==e)return{};var a,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=o.createContext({}),c=function(e){var t=o.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},h="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),h=c(a),d=n,m=h["".concat(l,".").concat(d)]||h[d]||p[d]||r;return a?o.createElement(m,i(i({ref:t},u),{},{components:a})):o.createElement(m,i({ref:t},u))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,i=new Array(r);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[h]="string"==typeof e?e:n,i[1]=s;for(var c=2;c<r;c++)i[c]=a[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,a)}d.displayName="MDXCreateElement"},5051:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var o=a(7462),n=(a(7294),a(3905));const r={sidebar_position:5,title:"5. Setting Up The Camera",description:"Creating our webhooks and setting up our upload channels."},i=void 0,s={unversionedId:"r14-evidence/Installation Process/camera",id:"r14-evidence/Installation Process/camera",title:"5. Setting Up The Camera",description:"Creating our webhooks and setting up our upload channels.",source:"@site/docs/r14-evidence/Installation Process/camera.md",sourceDirName:"r14-evidence/Installation Process",slug:"/r14-evidence/Installation Process/camera",permalink:"/r14-evidence/Installation Process/camera",draft:!1,editUrl:"https://github.com/regalonefour/regalonefour.github.io/blob/main/docs/r14-evidence/Installation Process/camera.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,title:"5. Setting Up The Camera",description:"Creating our webhooks and setting up our upload channels."},sidebar:"tutorialSidebar",previous:{title:"Setting Up Player Identifiers",permalink:"/r14-evidence/Installation Process/esx/sql"},next:{title:"6. Updating Our Database",permalink:"/r14-evidence/Installation Process/sql"}},l={},c=[{value:"Setting Up Our Upload Channels",id:"setting-up-our-upload-channels",level:2}],u={toc:c},h="wrapper";function p(e){let{components:t,...r}=e;return(0,n.kt)(h,(0,o.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Following the 1.4 update, the functionality of the evidence camera has been expanded to give users more options to take and upload photos,\nallowing them to select from a configured list of public, job-specific, or password-protected upload channels. In order to use this functionality,\nyou MUST properly set up your upload channels in your ",(0,n.kt)("inlineCode",{parentName:"p"},"config.lua")," AND your ",(0,n.kt)("inlineCode",{parentName:"p"},"server/nikon.lua")," by creating an upload channel for each one in your\nconfig. If you do not do this, screenshot-basic will not be able to upload the photo to your discord and create a URL that can be saved in the database."),(0,n.kt)("admonition",{type:"danger"},(0,n.kt)("p",{parentName:"admonition"},"Do not edit the LOCAL STORAGE upload channel if you do not know what you are doing. This is the channel used to create the photos for the onboard\nstorage on the camera item, do not use it as your police webhook unless you understand that anyone with a camera item will be able to upload to it.")),(0,n.kt)("h2",{id:"setting-up-our-upload-channels"},"Setting Up Our Upload Channels"),(0,n.kt)("p",null,"In our config, we will find our ",(0,n.kt)("inlineCode",{parentName:"p"},"Config.Camera")," table which includes the image spaces or upload channels that will be available in our camera. You can use\nthe included ones, or edit them to your liking. Each upload space has a few variables which set the various attributes, and we can see them below! Our most\nuseful one will be the Path, or name, of the image space. This lets our players know what they are uploading too. Next, we can choose to set a password with\nthe Password variable if we wish to create a secure image space, by default image spaces will be public and anyone who can see them will be able to upload to\nthem! lastly, we have our Auth, Job, and Type variables which we can use to restrict our image spaces to certain jobs. If you wish to create a multi-job, multi-type\ncheck using the included ",(0,n.kt)("inlineCode",{parentName:"p"},"Config.Auth")," system in this script you may, or you can simply specify a job name with Job or a job type with Type. "),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:"'config.lua Camera Configuration' showLineNumbers","'config.lua":!0,Camera:!0,"Configuration'":!0,showLineNumbers:!0},"Config.Camera = {\n    [1] = {Path = 'LOCAL STORAGE'}, -- do not remove the default upload, this serves as local storage for the camera to save onto the camera item/sd card WITHOUT uploading it\n    [2] = {Path = 'NIKOFF IMAGE SPACE', Password = nil}, -- this is a public webhook/image space for civilians to use the camera for, not required but recommended\n    [3] = {Path = 'SA_NSS/GENERAL/', Password = nil, Auth = 'LEO'}, \n    [4] = {Path = 'SA_NSS/DRUGTASKFORCE/', Password = 'password123', Auth = 'LEO'},\n    [5] = {Path = 'SA_NSS/INVESTIGATIONS/', Password = 'password1234', Auth = 'LEO'},\n    [6] = {Path = 'SA_NSS/MEDICAL/', Password = 'password123', Auth = 'EMS'},\n    [7] = {Path = 'WEAZEL_NSS/BREAKING', Password = 'thetruth', Job = 'reporter'}, -- this is a private webhook for the reporter job, you can make job-specific webhooks using this method\n}\n")),(0,n.kt)("p",null,"Next, we must go into our server/nikon.lua and add our webhooks for each of our upload paths that we have created in the config. If you do not add a webhook in\nthe server-side table then your camera will throw an IC notification and an OOC print indicating that the camera does not have a webhook available. This means if\nyou have 8 upload channels you must have 8 webhooks listed in your table, even all 8 upload channels link to the same webhook. "),(0,n.kt)("admonition",{type:"caution"},(0,n.kt)("p",{parentName:"admonition"},"For local storage, it is recommended to set up a webhook that is linked to a channel in your discord only accessible to administrators and staff, this will\nprevent the potential for players to metagame information from photos taken in game that should only be available to a person who has physical access to the\ncamera which took it.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-lua",metastring:"'server/nikon.lua Webhook Configuration' showLineNumbers","'server/nikon.lua":!0,Webhook:!0,"Configuration'":!0,showLineNumbers:!0},"local Webhooks = { -- these webhooks keys MUST MATCH your config keys\n    [1] = '', -- THIS IS REQUIRED TO USE THE CAMERA AT ALL!!! \n    [2] = '',\n    [3] = '',\n    [4] = '',\n    [5] = '',\n    [6] = '',\n    [7] = '',\n}\n")),(0,n.kt)("p",null,"Once you have completed this step, you can navigate to your game where you can make sure your webhooks are functional and accessible. The first step in this process will simply be\nchecking your server console when you either start or restart your script. During the initilzation process for the camera, missing or blank webhooks for upload channels defined in\nConfig.Camera will be printed to your console as shown below."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"View of txadmin during startup while missing webhooks",src:a(1562).Z,width:"1721",height:"369"})),(0,n.kt)("p",null,"If you do not recieve any of these prints, you can then proceed to test your webhooks by navigating to your camera. Whenever you use the Nikoff G600 item, your viewfinder will briefly\ndisplay both the keybind for opening the camera menu (E), as well as the upload channel currently selected in the camera settings. For new cameras, this will always be LOCAL STORAGE or\nthe first image space defined in your Config.Camera table if you have modified it. "),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"The viewfinder of the Nikoff G900 camera",src:a(4625).Z,width:"1820",height:"1040"})),(0,n.kt)("p",null,"Once you have opened your device settings, click on the ",(0,n.kt)("inlineCode",{parentName:"p"},"Image Upload")," box in order to set the desired upload channel for your camera, you will be presented with a list of all available\nimage spaces to YOUR CHARACTER. This means that if an image space is restricted by a job or job authorized function in the script, it will not appear in this menu unless you have it. For\nthis example, the Weazel News Secure Image Space that is setup by default is not visible to the police character using the camera below."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Image upload setting menu",src:a(6563).Z,width:"871",height:"515"})),(0,n.kt)("p",null,"After selecting your image space, you can attempt to take a photo, and if the webhook is functioning it will automatically upload to your discord channel, save the image to the camera item,\nand upload it to the shared image space accessible from the device settings menu on the camera. If you are not able to upload it, you will get an error notification telling you to contact\ncustomer support in character as well as a print in the client F8 console that will inform you that your webhook is blank and not accessible for the camera to use."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Image upload setting menu",src:a(114).Z,width:"1857",height:"382"})))}p.isMDXComponent=!0},1562:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/brokenwebhooks-d03255408a33732bad57efbc204064e5.png"},6563:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/imageuploadsetting-f614ef6f09a108290e6bc586a033f888.png"},114:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/uploadpatherror-1d784d9ac008e39cc91dd150310caf5a.png"},4625:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/userinterface-d421363d2452504d046ba543440bf999.png"}}]);